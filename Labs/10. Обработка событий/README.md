# Лабораторная работа 10: Обработка событий

## Задание

Добавить в приложение из ЛР9 подсветку фигур при наведении на них курсора мыши.

При нажатии левой кнопкой мыши на фигуру выводить информацию о ней (название, координаты) в виджет
с помощью `QPainter::drawText`.

## Порядок выполнения работы

1) Для того чтобы подсвечивать фигуру при наведении на неё курсора мыши, нужно каждый раз при перемещении курсора проверять его кординаты.
   И если координаты лежат внутри фигуры -- перерисовывать фигуру другим цветом или что-то подобное (подсветка).

   Для отслеживания координат курсора в Qt следует переопределить метод [`QWidget::mouseMoveEvent`](https://doc.qt.io/qt-6/qwidget.html#mouseMoveEvent).

   Кроме `mouseMoveEvent` у `QWidget` есть методы `mousePressEvent` и `mouseReleaseEvent` которые отслеживают
   нажатие и отпускание кнопок мыши, соответственно. Все они получают указатель на объект [`QMouseEvent`](https://doc.qt.io/qt-6/qmouseevent.html).

   У `QMouseEvent` есть геттеры `position()` и `button()` с помощью которых можно узнать координаты мыши и кнопку
   которая была нажата или отпущена (вызвала событие).

   Пример обработки событий пермещения курсора и нажатия на кнопки мыши:
   ```cpp
   // Прототип переопределённого метода в классе
   virtual void mouseMoveEvent(QMouseEvent *event) override;
   virtual void mousePressEvent(QMouseEvent *event) override;

   // Реализации методов
   void MyWidget::mouseMoveEvent(QMouseEvent *event)
   {
       QPoint cursor_position = event->position();
       if (cursor_position.x() > 100 && cursor_position.x() < 200) {
           // Что-то делаем если координаты курсора по горизонтали находятся в диапазоне от 100 до 200 пикселей 
       }

       // Если нужно обновить окно (перерисовать фигуры заново), вызываем
       // update();
   }

   void MyWidget::mousePressEvent(QMouseEvent *event)
   {
       if (event->button() == Qt::LeftButton) {
           // Что-то делаем если была нажата именно левая кнопка мыши
       }
   }
   ```

   **Примечание** По-умолчанию, виджет не отслеживает перемещение курсора и `mouseMoveEvent` вызываться не будет.
   Его надо включить с помощью вызова `setMouseTracking(true)` в конструкторе виджета.

2) Добавьте в базовый класс фигуры метод `isPointInside` и переопределите его в каждой наследованной фигуре,
   так чтобы он выдавал `true` или `false` в зависимости от того, лежит ли точка внутри фигуры или нет.
   Также добавьте в фигуру признак, подсвечена ли она сейчас (добавьте также сеттер и геттер признака).

4) Затем добавьте код, который будет при каждом перемещении курсора проходить в цикле по всему вектору фигур,
   опрашивая каждую из них, лежат ли координаты курсора внутри неё. И обновлять ее признак подсвеченности.

5) Модифицируйте метод `paint` каждой фигуры, так чтобы он рисовал подсвеченные и неподсвеченные фигуры по-разному.
   
6) Для того чтобы отслеживать нажатия левой кнопки мыши перегрузите метод [`QWidget::mousePressEvent`](https://doc.qt.io/qt-6/qwidget.html#mousePressEvent).

   Этот метод должен проверить по какой фигуре было нажатие и выводить информацию о ней в виджет
   с помощью `QPainter::drawText`.
   Пример рисования текста в виджете:

   ```cpp
   // Создадим художника
   QPainter painter(this);

   // Дадим ему инструменты
   painter.setPen(/* параметры карандаша */);
   painter.setFont(/* параметры шрифта */);

   // Рисуем строку в координаты (50, 50)
   QPoint pos(50, 50);
   painter.drawText(pos, "Hello, Qt Widgets!");
   ```
